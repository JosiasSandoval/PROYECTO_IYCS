<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="/static/css/secretaria_documentos.css">
    <title>LITBOOK | Gestión de Documentos</title>
</head>
<body 
    data-rol="{{ session.get('rol_sistema', '') }}"
    data-id="{{ session.get('idUsuario', '') }}"
    data-parroquia="{{ session.get('idParroquia', '') }}">
    <div id="header-placeholder"></div>
    <main class="grid">
        <div id="barra_lateral_administrador-placeholder"></div>
        <div class="contenido-principal-scroll">
            <div class="contenido">   
                <h3 class="titulo-seccion">GESTIÓN DE DOCUMENTOS - REQUISITOS</h3>
                
                <!-- Buscador de Reservas -->
                <form id="formBusqueda" class="mt-3">
                    <label for="inputBusqueda">Buscar Reserva por Feligrés o N° Reserva:</label>
                    <div class="input-group-search">
                        <input type="text" id="inputBusqueda" placeholder="Ingrese nombre del feligrés o número de reserva" autocomplete="off"/>
                        <button type="button" id="btn_buscar" class="btn-icon" title="Buscar">
                            <img src="/static/img/lupa.png" alt="Buscar" />
                        </button>
                    </div>
                </form>

                <!-- Resultados de Búsqueda: Lista de Reservas -->
                <div id="resultados-busqueda" class="resultados-seccion" style="display: none;">
                    <h4 class="subtitulo">Reservas Encontradas</h4>
                    <p class="text-muted">Seleccione una reserva para gestionar sus documentos:</p>
                    <div id="lista-reservas" class="lista-reservas-grid"></div>
                </div>

                <!-- Detalle de la Reserva Seleccionada -->
                <div id="detalle-reserva" class="detalle-seccion" style="display: none;">
                    <!-- Información de la Reserva -->
                    <div class="info-reserva-card">
                        <h4>Información de la Reserva</h4>
                        <div class="info-grid">
                            <div class="info-item">
                                <span class="label">N° Reserva:</span>
                                <span class="value" id="info-num-reserva">-</span>
                            </div>
                            <div class="info-item">
                                <span class="label">Solicitante:</span>
                                <span class="value" id="info-solicitante">-</span>
                            </div>
                            <div class="info-item">
                                <span class="label">Acto Litúrgico:</span>
                                <span class="value" id="info-acto">-</span>
                            </div>
                            <div class="info-item">
                                <span class="label">Fecha del Acto:</span>
                                <span class="value" id="info-fecha-acto">-</span>
                            </div>
                            <div class="info-item">
                                <span class="label">Fecha Límite Documentos:</span>
                                <span class="value" id="info-fecha-limite" style="color: #e74c3c; font-weight: bold;">-</span>
                            </div>
                            <div class="info-item">
                                <span class="label">Estado Reserva:</span>
                                <span class="value badge" id="info-estado-reserva">-</span>
                            </div>
                        </div>
                    </div>

                    <!-- Lista de Requisitos y Estado de Documentos -->
                    <div class="requisitos-seccion">
                        <h4>Requisitos y Documentos</h4>
                        <div id="lista-requisitos" class="lista-requisitos"></div>
                    </div>

                    <!-- Acciones Finales -->
                    <div class="acciones-finales">
                        <button id="btn-volver-busqueda" class="btn btn-secondary">← Volver a Búsqueda</button>
                        <button id="btn-aprobar-todos-final" class="btn btn-success">✅ Aprobar Todos y Confirmar</button>
                    </div>
                </div>

            </div>
        </div>
    </main>

    <!-- Modal de Confirmación -->
    <div id="modalConfirmacion" class="modal-overlay" style="display: none;">
        <div class="modal-content modal-small">
            <div class="modal-header">
                <h3 id="titulo-confirmacion">Confirmar Acción</h3>
                <button class="btn-close" onclick="cerrarModalConfirmacion()">×</button>
            </div>
            <div class="modal-body">
                <p id="mensaje-confirmacion"></p>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="cerrarModalConfirmacion()">Cancelar</button>
                <button class="btn btn-primary" id="btn-confirmar-accion">Confirmar</button>
            </div>
        </div>
    </div>

    <script src="/static/js/header.js"></script>
    <script src="/static/js/barra_lateral_administrador.js"></script>
    <script src="/static/js/secretaria_documentos.js"></script>
</body>
</html>